<!DOCTYPE HTML>
<html>
	<head>
		<title>取消与利用冒泡</title>
		<meta charset="utf-8"/>		
	</head>
	<body>
		<div id="keys">
			<button>1</button>
			<button>2</button>
			<button>3</button>
			<button>4</button><br>
			<button>C</button>
			<button>+</button>
			<button>-</button>
			<button>=</button>
		</div>
		<textarea id="sc" style="resize:none;width:200px; height:50px;" readonly></textarea>
		<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
		<script>
		  //查找id为keys的div,添加单击事件处理函数
			$("#keys").delegate("button","click",
			(function(){//e->event
			  var $target=$(this);
			  //查找id为sc的文本框,保存在变量sc中
			  var $sc=$("#sc")
			  //如果目标元素是button
				//判断目标元素的内容
				switch($target.html()){
				  //是C
				  case "C":
					//清除sc的内容
					$sc.val("");
					break;
				  //是=
				  case "=":
					//尝试
					try{
					  if($sc.val("")){break;}
					  //将sc的内容放入eval，将计算结果再赋值回sc的内容中
					  $sc.val(eval($sc.val()));
					  break;
					//捕获错误
					}catch(err){
					  //将错误信息放回sc的内容中
					  $sc.val(String(err));
					  break;
					}
					
				  //其余: 
				  default:
					//将目标元素的内容追加到sc的内容中
					$sc.val($sc.val()+$target.html());
				}
			})
			)
		</script>
	</body>
</html>