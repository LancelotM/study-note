(function(e,Q,ap){var o=e.angular["$interpolateMinErr"];var S=e.angular.noop,ae=e.angular.isFunction,am=e.angular.toJson;function y(aN){if(aN==null){return""}switch(typeof aN){case"string":return aN;case"number":return""+aN;default:return am(aN)}}function ah(aO,aR){var aQ=aO.split(/\n/g);for(var aN=0;aN<aQ.length;aN++){var aP=aQ[aN];if(aR>=aP.length){aR-=aP.length}else{return{line:aN+1,column:aR+1}}}}var H=Object.create(null);function aK(aO){var aP=H[aO];if(aP!=null){return aP}function aQ(aR){return aO}aQ["$$watchDelegate"]=function aN(aR,aS,aV){var aT=aR["$watch"](S,function aU(){if(ae(aS)){aS.call(null,aO,aO,aR)}aT()},aV);return aT};H[aO]=aQ;aQ.exp=aO;aQ.expressions=[];return aQ}function aA(aN,aS){if(aS===0){return aN}function aP(aT){return(aT==void 0)?aT:aT-aS}function aQ(aT){return aP(aN(aT))}var aO;aQ["$$watchDelegate"]=function aR(aV,aW,aT){aO=aV["$watch"](aN,function aU(aY,aX){if(ae(aW)){aW.call(null,aP(aY),aP(aX),aV)}},aT);return aO};return aQ}function s(aN,aO){var aP=this;this.expressionFn=aN;this.choices=aO;if(aO.other===void 0){throw o("reqother","“other” is a required option.")}this.parsedFn=function(aR){return aP.getResult(aR)};this.parsedFn["$$watchDelegate"]=function aQ(aT,aR,aS){return aP.watchDelegate(aT,aR,aS)};this.parsedFn.exp=aN.exp;this.parsedFn.expressions=aN.expressions}s.prototype.getMessageFn=function R(aN){return this.choices[this.categorizeValue(aN)]};s.prototype.getResult=function aC(aN){return this.getMessageFn(this.expressionFn(aN))(aN)};s.prototype.watchDelegate=function aM(aQ,aO,aP){var aN=new aG(this,aQ,aO,aP);return function(){aN.cancelWatch()}};function aG(aS,aN,aO,aP){var aR=this;this.scope=aN;this.msgSelector=aS;this.listener=aO;this.objectEquality=aP;this.lastMessage=void 0;this.messageFnWatcher=S;var aQ=function(aU,aT){return aR.expressionFnListener(aU,aT)};this.expressionFnWatcher=aN["$watch"](aS.expressionFn,aQ,aP)}aG.prototype.expressionFnListener=function g(aN,aR){var aP=this;this.messageFnWatcher();var aQ=function(aT,aS){return aP.messageFnListener(aT,aS)};var aO=this.msgSelector.getMessageFn(aN);this.messageFnWatcher=this.scope["$watch"](aO,aQ,this.objectEquality)};aG.prototype.messageFnListener=function M(aN,aO){if(ae(this.listener)){this.listener.call(null,aN,aN===aO?aN:this.lastMessage,this.scope)}this.lastMessage=aN};aG.prototype.cancelWatch=function aa(){this.expressionFnWatcher();this.messageFnWatcher()};function aH(aN,aO){s.call(this,aN,aO)}function G(){}G.prototype=s.prototype;aH.prototype=new G();aH.prototype.categorizeValue=function ar(aN){return(this.choices[aN]!==void 0)?aN:"other"};function az(aN,aO,aQ,aP){s.call(this,aN,aO);this.offset=aQ;this.pluralCat=aP}function ai(){}ai.prototype=s.prototype;az.prototype=new ai();az.prototype.categorizeValue=function k(aO){if(isNaN(aO)){return"other"}else{if(this.choices[aO]!==void 0){return aO}else{var aN=this.pluralCat(aO-this.offset);return(this.choices[aN]!==void 0)?aN:"other"}}};function aL(aN,aO){this.trustedContext=aN;this.allOrNothing=aO;this.textParts=[];this.expressionFns=[];this.expressionIndices=[];this.partialText="";this.concatParts=null}aL.prototype.flushPartialText=function X(){if(this.partialText){if(this.concatParts==null){this.textParts.push(this.partialText)}else{this.textParts.push(this.concatParts.join(""));this.concatParts=null}this.partialText=""}};aL.prototype.addText=function Z(aN){if(aN.length){if(!this.partialText){this.partialText=aN}else{if(this.concatParts){this.concatParts.push(aN)}else{this.concatParts=[this.partialText,aN]}}}};aL.prototype.addExpressionFn=function D(aN){this.flushPartialText();this.expressionIndices.push(this.textParts.length);this.expressionFns.push(aN);this.textParts.push("")};aL.prototype.getExpressionValues=function c(aO){var aP=new Array(this.expressionFns.length);for(var aN=0;aN<this.expressionFns.length;aN++){aP[aN]=this.expressionFns[aN](aO)}return aP};aL.prototype.getResult=function aC(aN){for(var aO=0;aO<this.expressionIndices.length;aO++){var aP=aN[aO];if(this.allOrNothing&&aP===void 0){return}this.textParts[this.expressionIndices[aO]]=aP}return this.textParts.join("")};aL.prototype.toParsedFn=function aE(aP,aO){var aQ=this;this.flushPartialText();if(aP&&this.expressionFns.length===0){return void 0}if(this.textParts.length===0){return aK("")}if(this.trustedContext&&this.textParts.length>1){o.throwNoconcat(aO)}if(this.expressionFns.length===0){if(this.textParts.length!=1){this.errorInParseLogic()}return aK(this.textParts[0])}var aN=function(aT){return aQ.getResult(aQ.getExpressionValues(aT))};aN["$$watchDelegate"]=function aS(aU,aV,aT){return aQ.watchDelegate(aU,aV,aT)};aN.exp=aO;aN.expressions=new Array(this.expressionFns.length);for(var aR=0;aR<this.expressionFns.length;aR++){aN.expressions[aR]=this.expressionFns[aR]["exp"]}return aN};aL.prototype.watchDelegate=function aM(aN,aO,aP){var aQ=new f(this,aN,aO,aP);return function(){aQ.cancelWatch()}};function f(aN,aR,aO,aP){this.interpolationParts=aN;this.scope=aR;this.previousResult=(void 0);this.listener=aO;var aQ=this;this.expressionFnsWatcher=aR["$watchGroup"](aN.expressionFns,function(aS,aT){aQ.watchListener(aS,aT)})}f.prototype.watchListener=function aB(aO,aN){var aP=this.interpolationParts.getResult(aO);if(ae(this.listener)){this.listener.call(null,aP,aO===aN?aP:this.previousResult,this.scope)}this.previousResult=aP};f.prototype.cancelWatch=function aa(){this.expressionFnsWatcher()};function av(aN,aO){aO.expressionFn=aN.expressionFn;aO.expressionMinusOffsetFn=aN.expressionMinusOffsetFn;aO.pluralOffset=aN.pluralOffset;aO.choices=aN.choices;aO.choiceKey=aN.choiceKey;aO.interpolationParts=aN.interpolationParts;aO.ruleChoiceKeyword=aN.ruleChoiceKeyword;aO.msgStartIndex=aN.msgStartIndex;aO.expressionStartIndex=aN.expressionStartIndex}function C(aN){av(aN,this)}function I(aQ,aP,aN,aU,aR,aS,aT,aO){this.text=aQ;this.index=aP||0;this.$parse=aN;this.pluralCat=aU;this.stringifier=aR;this.mustHaveExpression=!!aS;this.trustedContext=aT;this.allOrNothing=!!aO;this.expressionFn=null;this.expressionMinusOffsetFn=null;this.pluralOffset=null;this.choices=null;this.choiceKey=null;this.interpolationParts=null;this.msgStartIndex=null;this.nestedStateStack=[];this.parsedFn=null;this.rule=null;this.ruleStack=null;this.ruleChoiceKeyword=null;this.interpNestLevel=null;this.expressionStartIndex=null;this.stringStartIndex=null;this.stringQuote=null;this.stringInterestsRe=null;this.angularOperatorStack=null;this.textPart=null}var aF=new C(new I("",0,null,null,null,false,null,false));I.prototype.pushState=function U(){this.nestedStateStack.push(new C(this));av(aF,this)};I.prototype.popState=function aj(){if(this.nestedStateStack.length===0){this.errorInParseLogic()}var aN=this.nestedStateStack.pop();av(aN,this)};I.prototype.matchRe=function ax(aO,aN){aO.lastIndex=this.index;var aP=aO.exec(this.text);if(aP!=null&&(aN===true||(aP.index==this.index))){this.index=aO.lastIndex;return aP}return null};I.prototype.searchRe=function P(aN){return this.matchRe(aN,true)};I.prototype.consumeRe=function aD(aN){return !!this.matchRe(aN)};I.prototype.run=function i(aN){this.ruleStack=[aN];do{this.rule=this.ruleStack.pop();while(this.rule){this.rule()}this.assertRuleOrNull(this.rule)}while(this.ruleStack.length>0)};I.prototype.errorInParseLogic=function d(){throw o("logicbug","The messageformat parser has encountered an internal error.  Please file a github issue against the AngularJS project and provide this message text that triggers the bug.  Text: “{0}”",this.text)};I.prototype.assertRuleOrNull=function N(aN){if(aN===void 0){this.errorInParseLogic()}};var z=/\s*(\w+)\s*/g;I.prototype.errorExpecting=function af(){var aN=this.matchRe(z),aP;if(aN==null){aP=ah(this.text,this.index);throw o("reqarg","Expected one of “plural” or “select” at line {0}, column {1} of text “{2}”",aP.line,aP.column,this.text)}var aO=aN[1];if(aO=="select"||aO=="plural"){aP=ah(this.text,this.index);throw o("reqcomma","Expected a comma after the keyword “{0}” at line {1}, column {2} of text “{3}”",aO,aP.line,aP.column,this.text)}else{aP=ah(this.text,this.index);throw o("unknarg","Unsupported keyword “{0}” at line {0}, column {1}. Only “plural” and “select” are currently supported.  Text: “{3}”",aO,aP.line,aP.column,this.text)}};var V=/['"]/g;I.prototype.ruleString=function ak(){var aO=this.matchRe(V);if(aO==null){var aN=ah(this.text,this.index);throw o("wantstring","Expected the beginning of a string at line {0}, column {1} in text “{2}”",aN.line,aN.column,this.text)}this.startStringAtMatch(aO)};I.prototype.startStringAtMatch=function r(aN){this.stringStartIndex=aN.index;this.stringQuote=aN[0];this.stringInterestsRe=this.stringQuote=="'"?T:aw;this.rule=this.ruleInsideString};var T=/\\(?:\\|'|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|'/g;var aw=/\\(?:\\|"|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|"/g;I.prototype.ruleInsideString=function ab(){var aN=this.searchRe(this.stringInterestsRe);if(aN==null){var aP=ah(this.text,this.stringStartIndex);throw o("untermstr","The string beginning at line {0}, column {1} is unterminated in text “{2}”",aP.line,aP.column,this.text)}var aO=aN[0];if(aN==this.stringQuote){this.rule=null}};var q=/\s*(plural|select)\s*,\s*/g;I.prototype.rulePluralOrSelect=function A(){var aO=this.searchRe(q);if(aO==null){this.errorExpecting()}var aN=aO[1];switch(aN){case"plural":this.rule=this.rulePluralStyle;break;case"select":this.rule=this.ruleSelectStyle;break;default:this.errorInParseLogic()}};I.prototype.rulePluralStyle=function ag(){this.choices=Object.create(null);this.ruleChoiceKeyword=this.rulePluralValueOrKeyword;this.rule=this.rulePluralOffset};I.prototype.ruleSelectStyle=function au(){this.choices=Object.create(null);this.ruleChoiceKeyword=this.ruleSelectKeyword;this.rule=this.ruleSelectKeyword};var an=/[0]|(?:[1-9][0-9]*)/g;var ac=new RegExp("\\s*offset\\s*:\\s*("+an.source+")","g");I.prototype.rulePluralOffset=function B(){var aN=this.matchRe(ac);this.pluralOffset=(aN==null)?0:parseInt(aN[1],10);this.expressionMinusOffsetFn=aA(this.expressionFn,this.pluralOffset);this.rule=this.rulePluralValueOrKeyword};I.prototype.assertChoiceKeyIsNew=function ay(aO,aN){if(this.choices[aO]!==void 0){var aP=ah(this.text,aN);throw o("dupvalue","The choice “{0}” is specified more than once. Duplicate key is at line {1}, column {2} in text “{3}”",aO,aP.line,aP.column,this.text)}};var aJ=/\s*(\w+)/g;I.prototype.ruleSelectKeyword=function al(){var aN=this.matchRe(aJ);if(aN==null){this.parsedFn=new aH(this.expressionFn,this.choices).parsedFn;this.rule=null;return}this.choiceKey=aN[1];this.assertChoiceKeyIsNew(this.choiceKey,aN.index);this.rule=this.ruleMessageText};var x=new RegExp("\\s*(?:(?:=("+an.source+"))|(\\w+))","g");I.prototype.rulePluralValueOrKeyword=function J(){var aN=this.matchRe(x);if(aN==null){this.parsedFn=new az(this.expressionFn,this.choices,this.pluralOffset,this.pluralCat).parsedFn;this.rule=null;return}if(aN[1]!=null){this.choiceKey=parseInt(aN[1],10)}else{this.choiceKey=aN[2]}this.assertChoiceKeyIsNew(this.choiceKey,aN.index);this.rule=this.ruleMessageText};var h=/\s*{/g;var Y=/}/g;I.prototype.ruleMessageText=function W(){if(!this.consumeRe(h)){var aN=ah(this.text,this.index);throw o("reqopenbrace","The plural choice “{0}” must be followed by a message in braces at line {1}, column {2} in text “{3}”",this.choiceKey,aN.line,aN.column,this.text)}this.msgStartIndex=this.index;this.interpolationParts=new aL(this.trustedContext,this.allOrNothing);this.rule=this.ruleInInterpolationOrMessageText};var j=/\\.|{{|}/g;var m=/\\.|{{|#|}/g;var w=/\\.|{{/g;I.prototype.advanceInInterpolationOrMessageText=function ad(){var aQ=this.index,aR,aO;if(this.ruleChoiceKeyword==null){aR=this.searchRe(w);if(aR==null){this.textPart=this.text.substring(aQ);this.index=this.text.length;return null}}else{aR=this.searchRe(this.ruleChoiceKeyword==this.rulePluralValueOrKeyword?m:j);if(aR==null){var aP=ah(this.text,this.msgStartIndex);throw o("reqendbrace","The plural/select choice “{0}” message starting at line {1}, column {2} does not have an ending closing brace. Text “{3}”",this.choiceKey,aP.line,aP.column,this.text)}}var aN=aR[0];this.textPart=this.text.substring(aQ,aR.index);return aN};I.prototype.ruleInInterpolationOrMessageText=function aI(){var aN=this.index;var aO=this.advanceInInterpolationOrMessageText();if(aO==null){this.index=this.text.length;this.interpolationParts.addText(this.text.substring(aN));this.rule=null;return}if(aO[0]=="\\"){this.interpolationParts.addText(this.textPart+aO[1]);return}this.interpolationParts.addText(this.textPart);if(aO=="{{"){this.pushState();this.ruleStack.push(this.ruleEndMustacheInInterpolationOrMessage);this.rule=this.ruleEnteredMustache}else{if(aO=="}"){this.choices[this.choiceKey]=this.interpolationParts.toParsedFn(false,this.text);this.rule=this.ruleChoiceKeyword}else{if(aO=="#"){this.interpolationParts.addExpressionFn(this.expressionMinusOffsetFn)}else{this.errorInParseLogic()}}}};I.prototype.ruleInterpolate=function n(){this.interpolationParts=new aL(this.trustedContext,this.allOrNothing);this.rule=this.ruleInInterpolation};I.prototype.ruleInInterpolation=function ao(){var aP=this.index;var aN=this.searchRe(w);if(aN==null){this.index=this.text.length;this.interpolationParts.addText(this.text.substring(aP));this.parsedFn=this.interpolationParts.toParsedFn(this.mustHaveExpression,this.text);this.rule=null;return}var aO=aN[0];if(aO[0]=="\\"){this.interpolationParts.addText(this.text.substring(aP,aN.index)+aO[1]);return}this.interpolationParts.addText(this.text.substring(aP,aN.index));this.pushState();this.ruleStack.push(this.ruleInterpolationEndMustache);this.rule=this.ruleEnteredMustache};I.prototype.ruleInterpolationEndMustache=function L(){var aN=this.parsedFn;this.popState();this.interpolationParts.addExpressionFn(aN);this.rule=this.ruleInInterpolation};I.prototype.ruleEnteredMustache=function F(){this.parsedFn=null;this.ruleStack.push(this.ruleEndMustache);this.rule=this.ruleAngularExpression};I.prototype.ruleEndMustacheInInterpolationOrMessage=function l(){var aN=this.parsedFn;this.popState();this.interpolationParts.addExpressionFn(aN);this.rule=this.ruleInInterpolationOrMessageText};var p=/\s*}}/g;I.prototype.ruleEndMustache=function O(){var aO=this.matchRe(p);if(aO==null){var aN=ah(this.text,this.index);throw o("reqendinterp","Expecting end of interpolation symbol, “{0}”, at line {1}, column {2} in text “{3}”","}}",aN.line,aN.column,this.text)}if(this.parsedFn==null){this.parsedFn=this.$parse(this.expressionFn,this.stringifier);this.parsedFn.exp=this.expressionFn.exp;this.parsedFn.expressions=this.expressionFn.expressions}this.rule=null};I.prototype.ruleAngularExpression=function a(){this.angularOperatorStack=[];this.expressionStartIndex=this.index;this.rule=this.ruleInAngularExpression};function E(aN){switch(aN){case"{":return"}";case"[":return"]";case"(":return")";default:return null}}function v(aN){switch(aN){case"}":return"{";case"]":return"[";case")":return"(";default:return null}}var u=/[[\]{}()'",]/g;I.prototype.ruleInAngularExpression=function t(){var aO=this.index;var aN=this.searchRe(u);var aP;if(aN==null){if(this.angularOperatorStack.length===0){this.index=this.text.length;this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index));this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index);this.expressionFn.expressions=this.expressionFn.expressions;this.rule=null;return}var aR=this.angularOperatorStack[0];throw o("badexpr","Unexpected end of Angular expression.  Expecting operator “{0}” at the end of the text “{1}”",this.getEndOperator(aR),this.text)}var aQ=aN[0];if(aQ=="'"||aQ=='"'){this.ruleStack.push(this.ruleInAngularExpression);this.startStringAtMatch(aN);return}if(aQ==","){if(this.trustedContext){aP=ah(this.text,this.index);throw o("unsafe","Use of select/plural MessageFormat syntax is currently disallowed in a secure context ({0}).  At line {1}, column {2} of text “{3}”",this.trustedContext,aP.line,aP.column,this.text)}if(this.angularOperatorStack.length===0){this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,aN.index));this.expressionFn.exp=this.text.substring(this.expressionStartIndex,aN.index);this.expressionFn.expressions=this.expressionFn.expressions;this.rule=null;this.rule=this.rulePluralOrSelect}return}if(E(aQ)!=null){this.angularOperatorStack.unshift(aQ);return}var aS=v(aQ);if(aS==null){this.errorInParseLogic()}if(this.angularOperatorStack.length>0){if(aS==this.angularOperatorStack[0]){this.angularOperatorStack.shift();return}aP=ah(this.text,this.index);throw o("badexpr","Unexpected operator “{0}” at line {1}, column {2} in text. Was expecting “{3}”. Text: “{4}”",aQ,aP.line,aP.column,E(this.angularOperatorStack[0]),this.text)}this.index=aN.index;this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index));this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index);this.expressionFn.expressions=this.expressionFn.expressions;this.rule=null};var K=["$parse","$locale","$sce","$exceptionHandler",function aq(aO,aS,aP,aN){function aQ(aU,aV,aW){return function aT(aY){try{aY=aU?aP.getTrusted(aU,aY):aP.valueOf(aY);return aV&&(aY===void 0)?aY:y(aY)}catch(aX){aN(o.interr(aW,aX))}}}function aR(aX,aU,aV,aW){var aT=aQ(aV,aW,aX);var aY=new I(aX,0,aO,aS.pluralCat,aT,aU,aV,aW);aY.run(aY.ruleInterpolate);return aY.parsedFn}return{interpolate:aR}}];var b=["$$messageFormat","$delegate",function b(aN,aO){if(aO.startSymbol()!="{{"||aO.endSymbol()!="}}"){throw o("nochgmustache","angular-message-format.js currently does not allow you to use custom start and end symbols for interpolation.")}var aP=aN.interpolate;aP.startSymbol=aO.startSymbol;aP.endSymbol=aO.endSymbol;return aP}];var at=e.angular.module("ngMessageFormat",["ng"]);at.factory("$$messageFormat",K);at.config(["$provide",function(aN){aN.decorator("$interpolate",b)}])})(window,window.angular);